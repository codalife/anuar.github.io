<!doctype html><html domain=update-me.com lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><link href="/img/favicon/favicon-192x192.png?hash=2089033c93" rel=icon type=image/png><meta content=#f9c412 name=theme-color><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name=robots><title>An Ode to the State Machine. How I Learned to Stop Worrying and Love Predictable State</title><meta content="An Ode to the State Machine. How I Learned to Stop Worrying and Love Predictable State" property=og:title><meta content="The Breaking Point # Picture this: You're working on a seemingly straightforward app using Model-View-Presenter (MVP) with RxJS. The..." name=description><meta content="The Breaking Point # Picture this: You're working on a seemingly straightforward app using Model-View-Presenter (MVP) with RxJS. The..." property=og:description><meta content=summary_large_image name=twitter:card><meta content=@update_me name=twitter:site><meta content=@update_me name=twitter:creator><link href=https://update-me.com/posts/state-machine-blog-post/ rel=canonical><meta content=no-referrer-when-downgrade name=referrer><link href=/blog/feed/feed.xml rel=alternate type=application/atom+xml title="Anuar's blog"><link href=/ rel=preconnect crossorigin><link href=/fonts/Inter-3.19.var.woff2 rel=preload type=font/woff2 as=font crossorigin><script async defer src="/js/min.js?hash=8db32dcb3a"></script><script csp-hash>if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #f9c412;--primary-dark: #e7bf60;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog,share-widget{position:fixed;opacity:.9}share-widget{right:20px;bottom:20px}share-widget div{width:30px;height:30px;background-image:url(/img/share.svg);background-repeat:no-repeat;background-position:center}.apple share-widget div{background-image:url(/img/share-apple.svg)}body,share-widget button{margin:0}share-widget button:active{transform:scale(1.2)}dialog{background-color:#8dff80;z-index:1000}header aside{font-style:italic}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}#posts li{margin-bottom:.5em}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}button,hr{overflow:visible}hr{box-sizing:content-box;height:0;border-bottom:1px solid #eee}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;line-height:1.15;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}[hidden]{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}h1,h2,h3{margin-bottom:1.36rem}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem;line-height:1.6rem}body,ol,p,pre,ul{font-size:1em}ol,p,pre,ul{margin-bottom:1.5em}h1,h2{line-height:2.4rem}h2{font-size:1.728rem}body,ol,p,pre,ul{font-size:1rem;line-height:1.6}ol,p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}h3{font-size:2.1989rem;line-height:2.64rem}body,ol,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,h3,ol,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:6.0756rem;line-height:6.72rem}h2{font-size:4.05rem;line-height:4.8rem}h3{font-size:2.7rem;line-height:2.88rem}body,ol,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,h3,ol,p,pre,ul{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre:has(code:not([class])){background:#2d2d2d}pre code:not([class]){color:#ccc;padding:0;overflow-x:scroll}button,code{border-radius:.3em}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1,h2,h3{font-family:var(--font-family)}h2{font-style:italic}a:hover{text-decoration:underline}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body,header nav a{font-family:var(--font-family)}body{background:#181818;color:#eee}header{padding:4.5em 1.5em 3em;width:37.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p,ol,ul{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:rgba(0,0,0,.8);color:#fff;padding:3em;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;width:37.5em;margin:0 auto}li ol,li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.doctype{color:#999}.token.punctuation{color:#ccc}.token.function{color:#f08d49}.token.property{color:#f8c555}.token.keyword{color:#cc99cd}.token.string{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.inserted{color:green}</style><header><nav><div id=nav><h1><a href=/blog/ title=Homepage>Anuar's blog</a></h1><a href=/blog/about/ >About</a></div><div id=reading-progress aria-hidden=true></div></nav><h1>An Ode to the State Machine. How I Learned to Stop Worrying and Love Predictable State</h1><aside>4 min read.</aside><dialog id=message></dialog></header><main><article><h2 id=the-breaking-point>The Breaking Point <a href=#the-breaking-point class=direct-link>#</a></h2><p>Picture this: You're working on a seemingly straightforward app using Model-View-Presenter (MVP) with RxJS. The reactive patterns feel elegant at first—data flows, views update, life is good. But then, something insidious begins to happen.<p>Adding new features becomes a game of Jenga. Each change threatens to topple the entire structure because you can't predict which reactive models will cascade into chaos. Sound familiar?<h2 id=when-if-statements-multiply-like-rabbits>When If-Statements Multiply Like Rabbits <a href=#when-if-statements-multiply-like-rabbits class=direct-link>#</a></h2><p>In our case, we started adding guards everywhere—if statements that would "protect" certain parts of our data from changing unless specific conditions were met. These conditions? They all boiled down to one thing: <strong>the state of the application</strong>.<p>But here's where it got really interesting (and by interesting, I mean painful). The app needed to behave differently based on state, but deriving that state wasn't just about looking at current values—it depended on the journey of how we got there.<h3 id=a-tale-of-two-drags>A Tale of Two Drags <a href=#a-tale-of-two-drags class=direct-link>#</a></h3><p>Consider this real example that kept me up at night:<ul><li><strong>Scenario 1</strong>: User drags a calendar block to the right. When it reaches the edge, the calendar body should scroll left to reveal more space.<li><strong>Scenario 2</strong>: User drags the calendar itself with mouse down. The calendar should move right with the drag.</ul><p>Same gesture, completely different behaviors. The only difference? The application's state when the drag began.<h2 id=the-confidence-crisis>The Confidence Crisis <a href=#the-confidence-crisis class=direct-link>#</a></h2><p>This complexity created a devastating side effect: <strong>developer paralysis</strong>.<p>Engineers lost confidence that new code wouldn't break existing logic. Code reviews became archaeological expeditions, trying to unearth all the hidden dependencies. New modules inadvertently created cycles in our MVP pattern. Development velocity didn't just slow—it ground to a halt.<h2 id=the-false-start%3A-dependency-graphs>The False Start: Dependency Graphs <a href=#the-false-start%3A-dependency-graphs class=direct-link>#</a></h2><p>My first attempt at solving this was to create a static dependency graph of all reactive modules. It helped visualize the mess, but it was like having a map of a maze while still being stuck inside it. The graph was static, but our problems were dynamic.<h2 id=enter-the-state-machine>Enter the State Machine <a href=#enter-the-state-machine class=direct-link>#</a></h2><p>That's when I discovered (or rediscovered) the humble state machine. Instead of deriving state from a complex web of conditions, what if we explicitly modeled our application states and the transitions between them?<p>The transformation was profound:<h3 id=before-state-machines%3A>Before State Machines: <a href=#before-state-machines%3A class=direct-link>#</a></h3><pre class=language-javascript><code class=language-javascript><span class="token keyword">if</span> <span class="token punctuation">(</span>isDragging <span class="token operator">&&</span> dragTarget <span class="token operator">===</span> <span class="token string">'block'</span> <span class="token operator">&&</span> isAtEdge <span class="token operator">&&</span> <span class="token operator">!</span>isScrolling <span class="token operator">&&</span> previousAction <span class="token operator">!==</span> <span class="token string">'scroll'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Maybe scroll left? Unless...</span><br><span class="token punctuation">}</span></code></pre><h3 id=after-state-machines%3A>After State Machines: <a href=#after-state-machines%3A class=direct-link>#</a></h3><pre class=language-javascript><code class=language-javascript>stateMachine<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token string">'BLOCK_DRAG_AT_EDGE'</span><span class="token punctuation">)</span><br><span class="token comment">// The machine knows exactly what should happen</span></code></pre><h2 id=the-benefits-that-followed>The Benefits That Followed <a href=#the-benefits-that-followed class=direct-link>#</a></h2><ol><li><p><strong>Predictability</strong>: Given a state and an event, the outcome is deterministic. No more surprises.<li><p><strong>Visualization</strong>: We could literally draw our application logic. Product managers loved this.<li><p><strong>Testability</strong>: Testing state transitions is straightforward. Test the machine, trust the system.<li><p><strong>Onboarding</strong>: New developers could understand the app by studying the state diagram, not by reverse-engineering if-statement spaghetti.<li><p><strong>Confidence</strong>: Adding features became a matter of adding states or transitions, not threading new logic through existing guards.</ol><h2 id=the-real-magic>The Real Magic <a href=#the-real-magic class=direct-link>#</a></h2><p>The true power of state machines isn't just in managing complexity—it's in <strong>preventing</strong> complexity. They force you to think about your application as a series of discrete states, making impossible states actually impossible.<p>That dragging problem? It became two distinct states: <code>DRAGGING_BLOCK</code> and <code>DRAGGING_CALENDAR</code>. Each state knew exactly how to handle mouse movements. No ambiguity, no edge cases, no surprises.<h2 id=your-turn>Your Turn <a href=#your-turn class=direct-link>#</a></h2><p>If you're finding yourself:<ul><li>Adding guards to guards<li>Losing track of why certain conditions exist<li>Afraid to refactor because you might break something<li>Spending more time debugging state than building features</ul><p>Consider reaching for a state machine. Whether you use XState, a simple switch statement, or just the pattern itself, explicitly modeling your states will transform how you think about your application.<h2 id=the-bottom-line>The Bottom Line <a href=#the-bottom-line class=direct-link>#</a></h2><p>State machines aren't a silver bullet, but they're close. They turn the implicit explicit, the complex simple, and the unpredictable predictable. In a world of reactive spaghetti and cascading side effects, they're a beacon of clarity.<p>Sometimes the old solutions are old because they've stood the test of time. State machines have been solving these problems since before we were born. Maybe it's time we listened.<hr><p><em>Have you used state machines to tame complexity in your applications? What patterns have saved your projects from state-management hell? I'd love to hear your stories in the comments.</em></p><share-widget><button aria-label=Share href=https://update-me.com/posts/state-machine-blog-post/ on-click=share><div></div></button></share-widget><script type=application/ld+json>{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "An Ode to the State Machine. How I Learned to Stop Worrying and Love Predictable State",
  "image": [],
  "author": "Author Name. Update me.", 
  "genre": "Insert a schema.org genre", 
  "publisher": {
    "@type": "Organization",
    "name": "Publisher name. Update me.",
    "logo": {
      "@type": "ImageObject",
      "url": "/img/favicon/favicon-192x192.png?hash=2089033c93"
    }
  },
  "url": "https://update-me.com/posts/state-machine-blog-post/",
  "mainEntityOfPage": "https://update-me.com/posts/state-machine-blog-post/",
  "datePublished": "2025-07-18",
  "dateModified": "2025-07-18",
  "description": "The Breaking Point # Picture this: You&#39;re working on a seemingly straightforward app using Model-View-Presenter (MVP) with RxJS. The..."
}</script><p>Published <time datetime=2025-07-18>18 Jul 2025</time></article></main><footer><a href=/about/ >Author Name. Update me.</a></footer>